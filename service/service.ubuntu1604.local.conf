[[local|localrc]]
## Services ##
disable_all_services
# OpenStack Infrastructure services
enable_service key horizon rabbit mysql dstat
# NOVA
enable_service n-api n-cond n-sch n-cauth
# GLANCE
enable_service g-api g-reg
# NEUTRON
enable_service neutron q-svc q-dhcp q-meta
enable_plugin networking-odl http://git.openstack.org/openstack/networking-odl stable/newton
# enable_service q-agt q-l3

# Instance Console services (VNC)
enable_service n-novnc n-xvnc n-crt

## Repository sources ##
GIT_BASE=${GIT_BASE:-https://git.openstack.org}

## logging configuration ##
HOME=/opt/stack
DEST=${HOME}
DATA_DIR=${DEST}/data
LOGDIR=${DEST}/logs
SCREEN_LOGDIR=${LOGDIR}/screen-logs
LOGFILE=${LOGDIR}/stack.sh.log
LOG_COLOR=False
VERBOSE=True
# OFFLINE=True
# RECLONE=False

## Passwords & authentication ##
ADMIN_PASSWORD=secret
MYSQL_PASSWORD=${ADMIN_PASSWORD}
DATABASE_PASSWORD=${ADMIN_PASSWORD}
RABBIT_PASSWORD=${ADMIN_PASSWORD}
SERVICE_PASSWORD=${ADMIN_PASSWORD}
HORIZON_PASSWORD=${ADMIN_PASSWORD}
SERVICE_TOKEN_PASSWORD=${ADMIN_PASSWORD}
SERVICE_TOKEN=111222333

## Hosts & services configuration ##
MULTI_HOST=1
HOST_IP=192.168.3.2
HOST_NAME=$(hostname)
SERVICE_HOST=192.168.3.2
SERVICE_HOST_NAME=${HOST_NAME}
MYSQL_HOST=${SERVICE_HOST}
RABBIT_HOST=${SERVICE_HOST}
GLANCE_HOSTPORT=${SERVICE_HOST}:9292
KEYSTONE_AUTH_HOST=${SERVICE_HOST}
KEYSTONE_SERVICE_HOST=${SERVICE_HOST}
Q_HOST=${SERVICE_HOST}
ODL_HOST=service-node-odl

## Keystone configuration
KEYSTONE_USE_MOD_WSGI="True"

## Network configuration ##
ENABLE_TENANT_TUNNELS=True
IP_VERSION=4
Q_USE_SECGROUP=False
Q_PLUGIN=ml2

# ML2 config #
Q_ML2_PLUGIN_MECHANISM_DRIVERS=opendaylight,logger
Q_ML2_PLUGIN_TYPE_DRIVERS=vxlan,vlan,flat,local
Q_ML2_TENANT_NETWORK_TYPE=vxlan
ML2_L3_PLUGIN=odl-router

# ODL configuration #
ODL_RELEASE=boron-0.5.2-SR2
ODL_MODE=allinone
ODL_PROVIDER_MAPPINGS=public:eth1
ODL_NETVIRT_DEBUG_LOGS=True
ODL_NETVIRT_KARAF_FEATURE_OVSDB=odl-netvirt-openstack
ODL_GATE_SERVICE_PROVIDER=vpnservice
# Workaround since netvirt:1 no longer exists in DS!
ODL_BOOT_WAIT_URL=restconf/operational/network-topology:network-topology/

## Console Config ##
VNCSERVER_PROXYCLIENT_ADDRESS=${SERVICE_HOST}
VNCSERVER_LISTEN=0.0.0.0

[[post-config|/etc/neutron/plugins/ml2/ml2_conf.ini]]
[ml2]
mechanism_drivers=opendaylight

[[post-config|$NOVA_CONF]]
[DEFAULT]
firewall_driver=nova.virt.firewall.NoopFirewallDriver
scheduler_default_filters=RamFilter,ComputeFilter,AvailabilityZoneFilter,ComputeCapabilitiesFilter,ImagePropertiesFilter,PciPassthroughFilter,NUMATopologyFilter
novncproxy_host=0.0.0.0
novncproxy_port=6080

# vim: set ft=conf :

